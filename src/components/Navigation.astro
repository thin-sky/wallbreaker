---
import { getTranslations } from '@/i18n/utils';

const t = getTranslations(Astro.currentLocale);
const currentPath = Astro.url.pathname;
const locale = Astro.currentLocale || 'en';
const localePrefix = locale === 'en' ? '' : `/${locale}`;

const navItems = [
  { href: `${localePrefix}/`, label: t.nav.home },
  { href: `${localePrefix}/products`, label: t.nav.products },
  { href: `${localePrefix}/collections`, label: t.nav.collections },
  { href: `${localePrefix}/blog`, label: t.nav.blog },
  { href: `${localePrefix}/about`, label: t.nav.about },
  { href: `${localePrefix}/faq`, label: t.nav.faq },
];
---

<nav class="main-nav" aria-label="Main navigation">
  <div class="container nav-container">
    <a href={localePrefix || '/'} class="site-logo">
      <span class="logo-text">Wallbreaker</span>
    </a>
    
    <ul class="nav-list">
      {navItems.map((item) => (
        <li key={item.href}>
          <a
            href={item.href}
            aria-current={currentPath === item.href ? 'page' : undefined}
          >
            {item.label}
          </a>
        </li>
      ))}
    </ul>
    
    <language-switcher data-current-locale={locale}></language-switcher>
  </div>
</nav>

<style>
  .main-nav {
    background: white;
    border-bottom: 1px solid #e5e7eb;
    position: sticky;
    top: 0;
    z-index: 100;
  }
  
  .nav-container {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1rem;
    gap: 2rem;
  }
  
  .site-logo {
    font-size: 1.5rem;
    font-weight: 800;
    text-decoration: none;
    color: #2563eb;
  }
  
  .nav-list {
    display: flex;
    list-style: none;
    gap: 2rem;
    margin: 0;
    padding: 0;
  }
  
  .nav-list a {
    text-decoration: none;
    color: #374151;
    font-weight: 500;
    transition: color 0.2s;
  }
  
  .nav-list a:hover,
  .nav-list a[aria-current="page"] {
    color: #2563eb;
  }
  
  @media (max-width: 768px) {
    .nav-list {
      display: none;
    }
  }
</style>
